---
title: QSys Printing
---

`ASNA.DataGate.Common.Printfile` or `DataGate Printfile` (for short), is the ASNA.QSys class that abstracts the concept of a [IBM i Printer file](https://www.ibm.com/support/knowledgecenter/en/ssw_ibm_i_73/rzalu/rzaluprtfover.htm).

Similarly to a [QSys DatabaseFile](/concepts/program-structure/qsys-databasefile), a `DataGate Printfile` is a class used to instance objects to produce output records, according to external definitions.

## External Definition of a .NET Printfile
.NET Printfiles are output data definition records stored as a database objects.

> .NET Printfiles database objects as [Blobs](https://en.wikipedia.org/wiki/Binary_large_object) that contain the [XML](https://en.wikipedia.org/wiki/XML) detailed schema definition of the file. Such schema may be exported to a file for inspection.

## Creating/Designing `DataGate Printfile` objects
Microsoft Visual Studio (with DataGate integration) is used to create and maintain .NET Printfiles.

## Hosting PDF files on QSys Display Pages
To use Printfiles in a `QSys Program` the [QSys.Printfile] class. Programs typically declare the object as a member of the Program with code like:

**Declaration**
```cs
namespace MyCompany.MyApplication
{
    [ASNA.QSys.HostServices.ActivationGroup("*DFTACTGRP")]
    [ProgramEntry("_ENTRY")]
    public partial class MyProgram : ASNA.QSys.HostServices.Program
    {
        PrintFile QPRINT;
```
**Printfile Object Instantiation**
The declaration of the printfile as indicated above, has the PrintFile object set to null. As we have describe in the topic [QSys DatabaseFile](/concepts/program-structure/qsys-databasefile), the .NET Printfile object is *Instanced* in the [RPG language support](/concepts/program-structure/rpg-language-support) Nomad generated method `_instanceInit`, as follows: 

```cs
void _instanceInit()
{
    .
    .
    .
    QPRINT = new PrintFile(PopulateBufferQPRINT, "QPRINT", "MYLIBRARY\\MYFILEOBJ", QPRINTFormatIDs);
}
```
The `PrintFile` class constructor has the following required parameters:

| **Parameter**            | **Description**
| populateBufferMethod     | method called by I/O when writing records
| dclPrintFileName         | *string* logical name (usually short name)
| filePath                 | *string* library and name in the database
| levelCheck               | *dictionary* Level Check hash codes

The first parameter is the name of the method generated by [Nomad Tool](/concepts/enhancements/nomad-tools). As explained in the Topic [QSys DatabaseFile](/concepts/program-structure/qsys-databasefile), each time code in the `Program` writes to a record, the `PopulateBuffer` partial class generated *I/O* method wil be called, to prepare the internal buffer such that the *DataSet* can be loaded to effect the external Printfile.

The second parameter `dclPrintFileName` is a short name logically representing the external printfile name. This string identifier may be used later to form paths (for output file spooler).

The third parameter `filePath` is s string *library* and *name* path to where the printfile is defined externally in the database. 

The last required parameter is a [.NET Dictionary](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=net-5.0) with the [hash](https://en.wikipedia.org/wiki/Hash_function) codes have been loaded to be used while [Detecting File Description changes](https://www.ibm.com/support/knowledgecenter/en/ssw_ibm_i_73/dm/rbal3detectdesc.htm). This codes are also *generated* by [Nomad Tool](/concepts/enhancements/nomad-tools).

>Note the *naming convention* use by Nomad tools, the Printfile member is used while naming the partial I/O names. In this example, `QPRINT` is used in the names: PopulateBufferQPRINT and QPRINTFormatIDs

 **Program Constructor Code**
Before a .NET Printfile can be opened for writing, there are a few required properties that need to be setup.

Let's look at the typical code that goes in every `QSys Program`'s constructor:

```cs
public MyProgram()
{
    .
    .
    .
    QPRINT.Printer = "Microsoft Print to PDF";
    QPRINT.Overrider = Job;
    QPRINT.ManuscriptPath = ASNA.QSys.HostServices.Program.Spooler.GetNewFilePath(QPRINT.DclPrintFileName);
    QPRINT.Open(Job.PrinterDB);
}
```


**Destructor**

```cs
override public void Dispose(bool disposing)
{
    if (disposing)
    {
        
        CSMASTERL1.Close();
        CUSTOMERL1.Close();
        QPRINT.Close();
    }
    base.Dispose(disposing);
}
```




**Writing records**




